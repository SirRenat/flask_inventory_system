{% extends "base.html" %}

{% block content %}
<div class="product-form">
    <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h2>
	<form method="POST" action="{{ url_for('main.add_product') }}" enctype="multipart/form-data">
        <div class="form-group">
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:</label>
            <input type="text" name="title" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û—Ñ–∏—Å–Ω—ã–µ —Å—Ç—É–ª—å—è" required>
        </div>
        
        <div class="form-group">
            <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
            <select name="category_id" required>
                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é --</option>
                {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.name }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
            <textarea name="description" rows="4" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏..."></textarea>
        </div>
        
        <div class="form-group">
            <label>–¶–µ–Ω–∞ (—Ä—É–±.):</label>
            <input type="number" name="price" step="0.01" placeholder="0.00" required>
        </div>
        
        <div class="form-group">
            <label>–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ç–æ–≤–∞—Ä–∞ (–º–∞–∫—Å–∏–º—É–º 4):</label>
            <input type="file" name="images" multiple accept="image/*" 
                   onchange="previewImages(this)" 
                   style="padding: 10px; border: 2px dashed #ddd; border-radius: 8px; width: 100%;">
            <small style="color: #718096; display: block; margin-top: 5px;">
                üì∑ –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ (PNG, JPG, JPEG, GIF, WEBP)
            </small>
            <div id="image-preview" style="margin-top: 1rem; display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;"></div>
        </div>
        
        <button type="submit" class="btn" style="width: 100%;">üì§ –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button>
    </form>
</div>

<script>
function previewImages(input) {
    const preview = document.getElementById('image-preview');
    preview.innerHTML = '';
    
    if (input.files.length > 4) {
        alert('–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ –±–æ–ª–µ–µ 4 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π!');
        input.value = '';
        return;
    }
    
    for (let i = 0; i < input.files.length; i++) {
        const file = input.files[i];
        const reader = new FileReader();
        
        reader.onload = function(e) {
            const img = document.createElement('img');
            img.src = e.target.result;
            img.style.width = '100%';
            img.style.height = '120px';
            img.style.objectFit = 'cover';
            img.style.borderRadius = '8px';
            img.style.border = '2px solid #e2e8f0';
            preview.appendChild(img);
        }
        
        reader.readAsDataURL(file);
    }
}
</script>
{% endblock %}