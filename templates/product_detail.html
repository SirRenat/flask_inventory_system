{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è "–•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏" -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('main.index') }}">–ì–ª–∞–≤–Ω–∞—è</a></li>
            {% if product.category %}
                <li class="breadcrumb-item"><a href="{{ url_for('main.index') }}?category_id={{ product.category.id }}">
                    {{ product.category.name }}
                </a></li>
            {% endif %}
            <li class="breadcrumb-item active" aria-current="page">{{ product.title|truncate(50) }}</li>
        </ol>
    </nav>
    
    <div class="product-details-container">
        <!-- –ë–∞–Ω–Ω–µ—Ä —Å—Ç–∞—Ç—É—Å–∞ -->
        {% if product.status != product.STATUS_PUBLISHED %}
        <div class="status-banner {% if product.status == product.STATUS_READY_FOR_PUBLICATION %}status-ready{% elif product.status == product.STATUS_UNPUBLISHED %}status-unpublished{% else %}status-review{% endif %}">
            {% if product.status == product.STATUS_READY_FOR_PUBLICATION %}
            ‚è∞ –°—Ä–æ–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏—Å—Ç–µ–∫. –¢–æ–≤–∞—Ä –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –≤–∞–º.
            {% elif product.status == product.STATUS_UNPUBLISHED %}
            üö´ –¢–æ–≤–∞—Ä —Å–Ω—è—Ç —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏. –í–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –≤–∞–º.
            {% else %}
            üîç –¢–æ–≤–∞—Ä –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ
            {% endif %}
        </div>
        {% endif %}
        
        <div class="product-layout">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –ì–∞–ª–µ—Ä–µ—è –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="product-left-column">
                <!-- –ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
                <div class="product-gallery">
                    {% if product.images and product.images|length > 0 %}
                        <div class="main-image">
                            <img src="/uploads/{{ product.images[0] }}" 
                                 alt="{{ product.title }}" 
                                 id="mainImage"
                                 onerror="this.src='/static/images/no-image.png'">
                        </div>
                        {% if product.images|length > 1 %}
                        <div class="image-thumbnails">
                            {% for image in product.images %}
                            <img src="/uploads/{{ image }}" 
                                 alt="{{ product.title }}" 
                                 class="thumbnail {% if loop.first %}active{% endif %}"
                                 onclick="changeImage(this)"
                                 onerror="this.src='/static/images/no-image.png'">
                            {% endfor %}
                        </div>
                        {% endif %}
                    {% else %}
                        <div class="main-image no-image">
                            <div class="no-image-placeholder">
                                <div class="no-image-icon">
                                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                        <polyline points="21 15 16 10 5 21"></polyline>
                                    </svg>
                                </div>
                                <span>–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>
                            </div>
                        </div>
                    {% endif %}
                </div>
                
                <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–¥ –≥–∞–ª–µ—Ä–µ–µ–π -->
                <div class="main-product-info">
                    <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ç–æ–≤–∞—Ä–∞ -->
                    <div class="product-specs-card">
                        <h3><i class="specs-icon">üìã</i> –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
                        <div class="specs-grid">
                            {% if product.manufacturer %}
                            <div class="spec-item">
                                <span class="spec-label">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å</span>
                                <span class="spec-value">{{ product.manufacturer }}</span>
                            </div>
                            {% endif %}
                            
                            <div class="spec-item">
                                <span class="spec-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</span>
                                <span class="spec-value">{{ product.quantity }} —à—Ç.</span>
                            </div>
                            
                            <div class="spec-item">
                                <span class="spec-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</span>
                                <span class="spec-value">{{ product.product_category.name if product.product_category else '–ù–µ —É–∫–∞–∑–∞–Ω–∞' }}</span>
                            </div>
                            
                            <div class="spec-item">
                                <span class="spec-label">–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è</span>
                                <span class="spec-value">{{ product.created_at.strftime('%d.%m.%Y') }}</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
                    <div class="product-description-card">
                        <h3><i class="description-icon">üìù</i> –û–ø–∏—Å–∞–Ω–∏–µ</h3>
                        <div class="product-description-text">
                            {{ product.description or '–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç' }}
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –¶–µ–Ω–∞, –∫–æ–Ω—Ç–∞–∫—Ç—ã, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
            <div class="product-right-column">
                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –º–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–≤–µ—Ä—Ö—É -->
                <div class="product-header-section">
                    <div class="product-title-section">
                        <h1 class="product-title">{{ product.title }}</h1>
                        {% if product.manufacturer %}
                        <div class="product-manufacturer">
                            <span class="manufacturer-label">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å:</span>
                            <span class="manufacturer-value">{{ product.manufacturer }}</span>
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- –ú–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ -->
                    <div class="compact-meta-info">
                        <div class="meta-tags">
                            <span class="meta-tag status-tag status-{{ product.status }}">
                                <i class="tag-icon">üè∑Ô∏è</i>
                                {{ product.status_text }}
                                {% if product.status == product.STATUS_PUBLISHED and product.days_remaining > 0 %}
                                <span class="days-remaining">‚Ä¢ {{ product.days_remaining }} –¥–Ω.</span>
                                {% endif %}
                            </span>
                            
                            <span class="meta-tag category-tag">
                                <i class="tag-icon">üìÇ</i>
                                {{ product.product_category.name if product.product_category else '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' }}
                            </span>
                            
                            <span class="meta-tag date-tag">
                                <i class="tag-icon">üìÖ</i>
                                {{ product.created_at.strftime('%d.%m.%Y') }}
                            </span>
                        </div>
                    </div>
                </div>
                
                <!-- –ë–ª–æ–∫ —Ü–µ–Ω—ã -->
                <div class="price-section">
                    <div class="product-price-large">{{ "%.2f"|format(product.price) }} ‚ÇΩ</div>
                    {% if product.quantity > 1 %}
                    <div class="product-quantity">
                        <i class="quantity-icon">üì¶</i>
                        <span class="quantity-value">–í –Ω–∞–ª–∏—á–∏–∏: {{ product.quantity }} —à—Ç.</span>
                    </div>
                    {% endif %}
                </div>
                
                <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                {% if product.status == product.STATUS_PUBLISHED or current_user.id == product.user_id %}
                <div class="contact-section-modern">
                    <div class="contact-header">
                        <h3><i class="contact-icon">üìû</i> –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø—Ä–æ–¥–∞–≤—Ü–æ–º</h3>
                        <div class="seller-info">
                            <div class="seller-avatar">
                                <i class="avatar-icon">üë§</i>
                            </div>
                            <div class="seller-details">
                                <div class="seller-name">
                                    {% if product.owner.username %}
                                        {{ product.owner.username }}
                                    {% elif product.owner.company_name %}
                                        {{ product.owner.company_name }}
                                    {% else %}
                                        {{ product.owner.email.split('@')[0] }}
                                    {% endif %}
                                </div>
                                <div class="seller-rating">
                                    <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                    <span class="rating-text">5.0 ‚Ä¢ 1 –æ—Ç–∑—ã–≤</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="contact-actions">
                        {% if product.owner.phone %}
                        <a href="tel:{{ product.owner.phone }}" class="contact-button phone-button">
                            <i class="button-icon">üì±</i>
                            <span class="button-text">–ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω</span>
                            <span class="phone-number">{{ product.owner.phone[:5] }} XXX-XX-XX</span>
                        </a>
                        {% endif %}
                        
                        <button class="contact-button message-button" onclick="showMessageForm()">
                            <i class="button-icon">‚úâÔ∏è</i>
                            <span class="button-text">–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</span>
                            <span class="response-time">–û—Ç–≤–µ—á–∞–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è</span>
                        </button>
                        
                        <button class="contact-button favorite-button">
                            <i class="button-icon">‚ù§Ô∏è</i>
                            <span class="button-text">–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                        </button>
                        
                        <button class="contact-button compare-button">
                            <i class="button-icon">‚öñÔ∏è</i>
                            <span class="button-text">–°—Ä–∞–≤–Ω–∏—Ç—å</span>
                        </button>
                    </div>
                    
                    <!-- –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div class="contact-details-collapsible">
                        <div class="contact-details-item">
                            <i class="detail-icon">üë§</i>
                            <div class="detail-content">
                                <div class="detail-label">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ</div>
                                <div class="detail-value">{{ product.owner.contact_person or product.owner.company_name }}</div>
                            </div>
                        </div>
                        
                        <div class="contact-details-item">
                            <i class="detail-icon">‚úâÔ∏è</i>
                            <div class="detail-content">
                                <div class="detail-label">Email</div>
                                <div class="detail-value">
                                    <a href="mailto:{{ product.owner.email }}" class="contact-link">{{ product.owner.email }}</a>
                                </div>
                            </div>
                        </div>
                        
                        {% if product.owner.inn %}
                        <div class="contact-details-item">
                            <i class="detail-icon">üè¢</i>
                            <div class="detail-content">
                                <div class="detail-label">–ò–ù–ù</div>
                                <div class="detail-value">{{ product.owner.inn }}</div>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
                
                <!-- –î–µ–π—Å—Ç–≤–∏—è —Å —Ç–æ–≤–∞—Ä–æ–º (–¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞/–∞–¥–º–∏–Ω–∞) -->
                {% if current_user.id == product.user_id or current_user.role == 'admin' %}
                <div class="product-actions-modern">
                    <div class="actions-header">
                        <h3><i class="actions-icon">‚öôÔ∏è</i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–º</h3>
                    </div>
                    
                    <div class="actions-grid-modern">
                        {% if current_user.id == product.user_id %}
                        <a href="{{ url_for('main.edit_product', product_id=product.id) }}" 
                           class="action-modern-btn edit-btn">
                            <i class="action-modern-icon">‚úèÔ∏è</i>
                            <span class="action-modern-text">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
                        </a>
                        {% endif %}
                        
                        {% if product.status == product.STATUS_PUBLISHED and current_user.id == product.user_id %}
                        <form action="{{ url_for('main.unpublish_product', product_id=product.id) }}" 
                              method="POST" 
                              class="action-modern-form"
                              onsubmit="return confirm('–°–Ω—è—Ç—å —Ç–æ–≤–∞—Ä —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏? –û–Ω —Å—Ç–∞–Ω–µ—Ç –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –≤–∞–º.')">
                            <button type="submit" class="action-modern-btn unpublish-btn">
                                <i class="action-modern-icon">‚è∏Ô∏è</i>
                                <span class="action-modern-text">–°–Ω—è—Ç—å —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</span>
                            </button>
                        </form>
                        {% endif %}
                        
                        {% if product.status in [product.STATUS_READY_FOR_PUBLICATION, product.STATUS_UNPUBLISHED] and current_user.id == product.user_id %}
                        <form action="{{ url_for('main.renew_product', product_id=product.id) }}" 
                              method="POST" 
                              class="action-modern-form">
                            <button type="submit" class="action-modern-btn publish-btn">
                                <i class="action-modern-icon">üì§</i>
                                <span class="action-modern-text">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</span>
                            </button>
                        </form>
                        {% endif %}
                        
                        <form action="{{ url_for('main.delete_product', product_id=product.id) }}" 
                              method="POST" 
                              class="action-modern-form"
                              onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')">
                            <button type="submit" class="action-modern-btn delete-btn">
                                <i class="action-modern-icon">üóëÔ∏è</i>
                                <span class="action-modern-text">–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä</span>
                            </button>
                        </form>
                    </div>
                </div>
                {% endif %}
                
                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="additional-info">
                    <div class="info-item">
                        <i class="info-icon">üõ°Ô∏è</i>
                        <span class="info-text">–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å–¥–µ–ª–∫–∞</span>
                    </div>
                    <div class="info-item">
                        <i class="info-icon">üöö</i>
                        <span class="info-text">–í–æ–∑–º–æ–∂–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞</span>
                    </div>
                    <div class="info-item">
                        <i class="info-icon">üìÑ</i>
                        <span class="info-text">–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
:root {
    --primary-color: #0057FF;
    --primary-hover: #0047D6;
    --secondary-color: #6C757D;
    --success-color: #28A745;
    --warning-color: #FFC107;
    --danger-color: #DC3545;
    --light-color: #F8F9FA;
    --dark-color: #212529;
    --border-color: #E0E0E0;
    --border-light: #F0F0F0;
    --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
    --shadow-md: 0 4px 6px rgba(0,0,0,0.07);
    --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
}

/* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
.breadcrumb {
    background: transparent;
    padding: 0;
    margin-bottom: 24px;
}

.breadcrumb-item a {
    color: var(--primary-color);
    text-decoration: none;
    font-size: 14px;
}

.breadcrumb-item.active {
    color: var(--secondary-color);
}

.breadcrumb-item + .breadcrumb-item::before {
    content: ">";
    color: var(--secondary-color);
}

/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
.product-details-container {
    background: white;
    border-radius: var(--radius-md);
    padding: 32px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    margin-bottom: 32px;
}

.status-banner {
    padding: 12px 20px;
    border-radius: var(--radius-sm);
    margin-bottom: 24px;
    font-weight: 500;
    text-align: center;
    font-size: 14px;
}

.status-banner.status-ready {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    color: #856404;
}

.status-banner.status-unpublished {
    background: #ffebee;
    border: 1px solid #ffcdd2;
    color: #c62828;
}

.status-banner.status-review {
    background: #cce7ff;
    border: 1px solid #99ceff;
    color: #0066cc;
}

/* –ú–∞–∫–µ—Ç */
.product-layout {
    display: grid;
    grid-template-columns: 1.2fr 0.8fr;
    gap: 32px;
    align-items: start;
}

.product-left-column {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.product-right-column {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

/* –ì–∞–ª–µ—Ä–µ—è */
.product-gallery {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.main-image {
    width: 100%;
    height: 400px;
    border-radius: var(--radius-md);
    overflow: hidden;
    background: var(--light-color);
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--border-color);
}

.main-image img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    transition: transform 0.3s ease;
}

.main-image:hover img {
    transform: scale(1.02);
}

.image-thumbnails {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.thumbnail {
    width: 70px;
    height: 70px;
    border-radius: 6px;
    cursor: pointer;
    border: 2px solid transparent;
    object-fit: cover;
    transition: all 0.2s ease;
}

.thumbnail.active,
.thumbnail:hover {
    border-color: var(--primary-color);
    transform: scale(1.05);
}

.no-image-placeholder {
    text-align: center;
    color: #999;
    padding: 40px;
}

.no-image-icon svg {
    stroke: #999;
    opacity: 0.5;
}

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –º–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */
.product-header-section {
    margin-bottom: 16px;
}

.product-title {
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 12px;
    color: var(--dark-color);
    line-height: 1.3;
}

.product-manufacturer {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--secondary-color);
    font-size: 14px;
}

.manufacturer-label {
    font-weight: 600;
}

.manufacturer-value {
    color: var(--dark-color);
    font-weight: 500;
}

.compact-meta-info {
    margin-top: 12px;
}

.meta-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.meta-tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: var(--light-color);
    border-radius: 20px;
    font-size: 12px;
    font-weight: 500;
    border: 1px solid var(--border-color);
}

.tag-icon {
    font-size: 12px;
    opacity: 0.7;
}

.status-tag.status-1 {
    background: #E8F5E9;
    border-color: #C8E6C9;
    color: #2E7D32;
}

.status-tag.status-2 {
    background: #FFF3E0;
    border-color: #FFE0B2;
    color: #EF6C00;
}

.status-tag.status-3 {
    background: #FFEBEE;
    border-color: #FFCDD2;
    color: #C62828;
}

.days-remaining {
    color: #666;
    font-weight: normal;
}

/* –ë–ª–æ–∫ —Ü–µ–Ω—ã */
.price-section {
    padding: 20px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
}

.product-price-large {
    font-size: 36px;
    font-weight: 800;
    color: var(--primary-color);
    margin-bottom: 8px;
}

.product-quantity {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--secondary-color);
    font-size: 14px;
}

.quantity-icon {
    font-size: 16px;
}

/* –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω */
.contact-section-modern {
    background: white;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
    padding: 24px;
    box-shadow: var(--shadow-sm);
}

.contact-header {
    margin-bottom: 20px;
}

.contact-header h3 {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 18px;
    font-weight: 600;
    color: var(--dark-color);
    margin-bottom: 16px;
}

.contact-icon {
    font-size: 20px;
}

.seller-info {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    background: var(--light-color);
    border-radius: var(--radius-sm);
}

.seller-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
}

.avatar-icon {
    font-size: 24px;
}

.seller-details {
    flex: 1;
}

.seller-name {
    font-weight: 600;
    color: var(--dark-color);
    margin-bottom: 4px;
}

.seller-rating {
    display: flex;
    align-items: center;
    gap: 8px;
}

.stars {
    color: #FFC107;
    font-size: 14px;
}

.rating-text {
    font-size: 13px;
    color: var(--secondary-color);
}

.contact-actions {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 20px;
}

.contact-button {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 16px;
    border: 2px solid var(--border-color);
    border-radius: var(--radius-sm);
    background: white;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
}

.contact-button:hover {
    border-color: var(--primary-color);
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
}

.button-icon {
    font-size: 24px;
    margin-bottom: 8px;
}

.button-text {
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 4px;
}

.phone-number, .response-time {
    font-size: 12px;
    color: var(--secondary-color);
    opacity: 0.9;
}

.phone-button {
    border-color: var(--success-color);
}

.message-button {
    border-color: var(--primary-color);
}

.favorite-button {
    border-color: #FF6B6B;
}

.compare-button {
    border-color: var(--warning-color);
}

.contact-details-collapsible {
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding-top: 16px;
    border-top: 1px solid var(--border-light);
}

.contact-details-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px;
    border-radius: var(--radius-sm);
    transition: background 0.3s ease;
}

.contact-details-item:hover {
    background: var(--light-color);
}

.detail-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--light-color);
    border-radius: 6px;
    font-size: 16px;
}

.detail-content {
    flex: 1;
}

.detail-label {
    font-size: 12px;
    color: var(--secondary-color);
    margin-bottom: 2px;
}

.detail-value {
    font-size: 14px;
    color: var(--dark-color);
    font-weight: 500;
}

.contact-link {
    color: var(--primary-color);
    text-decoration: none;
    transition: color 0.2s ease;
}

.contact-link:hover {
    color: var(--primary-hover);
    text-decoration: underline;
}

/* –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ */
.product-specs-card, .product-description-card {
    background: white;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
    padding: 24px;
    box-shadow: var(--shadow-sm);
}

.product-specs-card h3, .product-description-card h3 {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 18px;
    font-weight: 600;
    color: var(--dark-color);
    margin-bottom: 20px;
}

.specs-icon, .description-icon {
    font-size: 20px;
}

.specs-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.spec-item {
    display: flex;
    flex-direction: column;
    gap: 6px;
    padding: 12px;
    background: var(--light-color);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-color);
}

.spec-label {
    font-weight: 600;
    color: var(--secondary-color);
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.spec-value {
    color: var(--dark-color);
    font-size: 14px;
    font-weight: 500;
}

.product-description-text {
    color: var(--dark-color);
    line-height: 1.6;
    font-size: 15px;
    white-space: pre-wrap;
}

/* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–º - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω */
.product-actions-modern {
    background: white;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
    padding: 24px;
    box-shadow: var(--shadow-sm);
}

.actions-header h3 {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 18px;
    font-weight: 600;
    color: var(--dark-color);
    margin-bottom: 20px;
}

.actions-icon {
    font-size: 20px;
}

.actions-grid-modern {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
}

.action-modern-btn {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    border: none;
    border-radius: var(--radius-sm);
    background: white;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 14px;
    font-weight: 500;
    text-decoration: none;
    color: var(--dark-color);
    border: 1px solid var(--border-color);
    width: 100%;
}

.action-modern-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
    border-color: var(--primary-color);
}

.action-modern-icon {
    font-size: 18px;
}

.action-modern-text {
    flex: 1;
    text-align: left;
}

.action-modern-form {
    display: contents;
}

.edit-btn {
    background: white;
    color: var(--primary-color);
}

.edit-btn:hover {
    background: #F0F7FF;
}

.unpublish-btn {
    background: white;
    color: var(--warning-color);
}

.unpublish-btn:hover {
    background: #FFF9E6;
    border-color: var(--warning-color);
}

.publish-btn {
    background: white;
    color: var(--success-color);
}

.publish-btn:hover {
    background: #F0FFF4;
    border-color: var(--success-color);
}

.delete-btn {
    background: white;
    color: var(--danger-color);
}

.delete-btn:hover {
    background: #FFF5F5;
    border-color: var(--danger-color);
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */
.additional-info {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    padding: 20px;
    background: var(--light-color);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
}

.info-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--secondary-color);
}

.info-icon {
    font-size: 16px;
    opacity: 0.8;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 1200px) {
    .product-layout {
        grid-template-columns: 1fr;
        gap: 24px;
    }
    
    .product-right-column {
        order: -1;
    }
}

@media (max-width: 768px) {
    .product-details-container {
        padding: 20px;
        margin: 0;
        border-radius: 0;
        border: none;
        border-top: 1px solid var(--border-color);
    }
    
    .product-title {
        font-size: 24px;
    }
    
    .product-price-large {
        font-size: 28px;
    }
    
    .main-image {
        height: 300px;
    }
    
    .contact-actions {
        grid-template-columns: 1fr;
    }
    
    .specs-grid {
        grid-template-columns: 1fr;
    }
    
    .thumbnail {
        width: 60px;
        height: 60px;
    }
    
    .meta-tags {
        flex-direction: column;
        align-items: flex-start;
    }
}

@media (max-width: 480px) {
    .product-title {
        font-size: 20px;
    }
    
    .product-price-large {
        font-size: 24px;
    }
    
    .main-image {
        height: 250px;
    }
    
    .contact-section-modern,
    .product-actions-modern,
    .product-specs-card,
    .product-description-card {
        padding: 16px;
    }
}
</style>

<script>
function changeImage(thumb) {
    const mainImage = document.getElementById('mainImage');
    if (mainImage) {
        mainImage.src = thumb.src;
    }
    
    // Update active thumbnail
    document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
    thumb.classList.add('active');
}

function showMessageForm() {
    alert('–§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∞ –∑–¥–µ—Å—å. –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–ª–∏ —Ñ–æ—Ä–º–∞.');
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    const images = document.querySelectorAll('.product-gallery img');
    images.forEach(img => {
        img.addEventListener('error', function() {
            this.src = '/static/images/no-image.png';
        });
    });
    
    // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è
    const descriptionText = document.querySelector('.product-description-text');
    if (descriptionText && descriptionText.scrollHeight > descriptionText.clientHeight) {
        descriptionText.style.maxHeight = '300px';
        descriptionText.style.overflowY = 'auto';
        descriptionText.style.cursor = 'ns-resize';
        descriptionText.addEventListener('wheel', function(e) {
            if (this.scrollHeight > this.clientHeight) {
                this.scrollTop += e.deltaY;
                e.preventDefault();
            }
        });
    }
});
</script>
{% endblock %}