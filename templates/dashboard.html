{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="dashboard">
        <div class="page-header">
            <h1 class="page-title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
            <p class="page-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—à–∏–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏</p>
        </div>
        
        <div class="dashboard-actions">
            <a href="{{ url_for('main.add_product') }}" class="btn-primary">
                ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
            </a>
        </div>
        
        <div class="user-products">
            <h3>–ú–æ–∏ —Ç–æ–≤–∞—Ä—ã ({{ products|length }})</h3>
            
            {% if products %}
            <div class="products-grid">
                {% for product in products %}
                <div class="product-card" onclick="location.href='{{ url_for('main.product_detail', product_id=product.id) }}'">
                    <div class="product-image">
                        {% if product.images and product.images|length > 0 %}
                            <img src="{{ url_for('static', filename='uploads/' + product.images[0]) }}" 
                                 alt="{{ product.title }}"
                                 onerror="this.style.display='none'; this.parentNode.innerHTML='<i>üì∑</i>';">
                        {% else %}
                            <i>üì∑</i>
                        {% endif %}
                    </div>
                    <div class="product-info">
                        <div class="product-category">
                            {{ product.category.name if product.category else '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' }}
                        </div>
                        <div class="product-name">{{ product.title }}</div>
                        <div class="product-price">
                            <span class="current-price">{{ "%.2f"|format(product.price) }} ‚ÇΩ</span>
                        </div>
                        <div class="product-meta">
                            <span>{{ product.created_at.strftime('%d.%m.%Y') }}</span>
                            <span class="product-status {% if product.is_active %}active{% else %}inactive{% endif %}">
                                {{ '–ê–∫—Ç–∏–≤–Ω–æ' if product.is_active else '–ù–µ–∞–∫—Ç–∏–≤–Ω–æ' }}
                            </span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-state">
                <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤</p>
                <a href="{{ url_for('main.add_product') }}" class="btn-primary">
                    –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π —Ç–æ–≤–∞—Ä
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
.dashboard {
    background: white;
    border-radius: 12px;
    padding: 32px;
    box-shadow: var(--shadow);
}

.dashboard-actions {
    margin-bottom: 32px;
}

.user-products h3 {
    margin-bottom: 20px;
    color: var(--text-primary);
}

.empty-state {
    text-align: center;
    padding: 48px 0;
    color: var(--text-secondary);
}

.empty-state p {
    margin-bottom: 16px;
    font-size: 18px;
}

.product-status {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.product-status.active {
    background: #d4edda;
    color: #155724;
}

.product-status.inactive {
    background: #f8d7da;
    color: #721c24;
}
</style>
{% endblock %}